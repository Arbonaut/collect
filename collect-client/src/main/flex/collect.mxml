<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
			   xmlns:s="library://ns.adobe.com/flex/spark" 
			   xmlns:mx="library://ns.adobe.com/flex/mx"
			   xmlns:component="org.openforis.collect.ui.component.*"
			   width="100%" height="100%" 
			   minWidth="955" minHeight="450" 
			   initialize="initializeHandler(event)"
			   creationComplete="creationCompleteHandler(event)" xmlns:input="org.openforis.collect.ui.component.detail.input.*" xmlns:presenter="org.openforis.collect.presenter.*">
	
	<fx:Script>
		<![CDATA[
			import com.flexspy.FlexSpy;
			
			import mx.collections.ArrayCollection;
			import mx.events.FlexEvent;
			import mx.messaging.Consumer;
			import mx.messaging.Producer;
			
			import org.openforis.collect.Application;
			import org.openforis.collect.presenter.CollectPresenter;
			
			private var _collectPresenter:CollectPresenter;
			
			protected function initializeHandler(event:FlexEvent):void {
				org.openforis.collect.Application.init();
			}
			
			private var producer:Producer;
			private var consumer:Consumer;
			
			protected function creationCompleteHandler(event:FlexEvent):void {
				this._collectPresenter = new CollectPresenter(this);
				
				CONFIG::debugging {
					this.addEventListener(KeyboardEvent.KEY_DOWN, function(event:KeyboardEvent):void {
						if(event.ctrlKey && event.shiftKey && event.charCode == 83)
							FlexSpy.show();
					});
				}
			}
			
		]]>
	</fx:Script>
	
	<fx:Declarations>
		<!-- Place non-visual elements (e.g., services, value objects) here -->
	</fx:Declarations>
	
	<fx:Metadata>
		[ResourceBundle("messages")]
	</fx:Metadata>
	
	<s:SkinnableContainer height="100%" width="1000" horizontalCenter="0">
		<s:layout>
			<s:VerticalLayout />
		</s:layout>
		<component:Header width="100%" />
		<component:MasterView width="100%" height="100%" />
		<component:Footer width="100%" />
	</s:SkinnableContainer>
		
	<!--
	<input:DateInputField />
	<input:CodeInputField />
	<input:TaxonInputField />
	<input:CoordinateInputField />
	-->
</s:Application>
