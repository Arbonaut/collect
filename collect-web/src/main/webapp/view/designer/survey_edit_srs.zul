<zk>
	<div id="unitsContainer"
		apply="org.zkoss.bind.BindComposer"
		viewModel="@id('vm') @init('org.openforis.collect.designer.viewmodel.SurveySRSEditVM')"
		height="100%">
		<hbox>
			<vbox>
		        <listbox id="itemsListBox"
		        	selectedItem="@bind(vm.selectedItem)"
		        	model="@load(vm.items)"
		        	onSelect="@command('selectionChanged')"
		        	height="200px"
		        	width="200px">
		        	<listhead>
						<listheader label="" width="150px" />
					</listhead>
		            <template name="model">
		                <listitem>
		                    <listcell label="@load(each.id)" />
		                </listitem>
		            </template>
		        </listbox>
		        
		        <button label="${labels.global.add_item}" onClick="@command('newItem')" />
		    </vbox>
	        
	        <div 
	        	visible="@load(vm.editingItem)"
				validationMessages="@id('vmsgs')"
				form="@id('itemEditForm') @load(vm.editedItem) @save(vm.editedItem, before='save')"
				width="400px"
				>
				<grid>
					<columns>
						<column label="" width="150px" />
						<column label="" width="100%" />
					</columns>
					<rows>
						<row>
							<label value="${labels.survey.srs.id}:" />
							<cell>
								<textbox width="150px" value="@bind(fx.id)" onChange="@command('applyChanges')" />
								<label class="error" value="@load(vmsgs['id'])" />
							</cell>
						</row>
						<row>
							<label value="${labels.survey.srs.label}:" />
							<cell>
								<textbox width="150px" value="@bind(fx.label)" onChange="@command('applyChanges')" />
								<label class="error" value="@load(vmsgs['label'])" />
							</cell>
						</row>
						<row>
							<label value="${labels.survey.srs.description}:" />
							<cell>
								<textbox width="150px" value="@bind(fx.description)" onChange="@command('applyChanges')" />
								<label class="error" value="@load(vmsgs['description'])" />
							</cell>
						</row>
						<row>
							<label value="${labels.survey.srs.wkt}:" />
							<cell>
								<textbox width="250px" value="@bind(fx.wellKnownText)" multiline="true" rows="10" 
									onChange="@command('applyChanges')" />
								<label class="error" value="@load(vmsgs['wellKnownText'])" />
							</cell>
						</row>
					</rows>
				</grid>
				
				<hbox>
					<button image="/assets/images/cross-small.png"
		                     onClick="@command('deleteItem')" />
				</hbox>
			</div>
	        
		</hbox>
    </div>
</zk>