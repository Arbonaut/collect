<?xml version="1.0" encoding="utf-8"?>
<detail:CompositeAttributeRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
				  xmlns:s="library://ns.adobe.com/flex/spark" 
				  xmlns:mx="library://ns.adobe.com/flex/mx" 
				  xmlns:input="org.openforis.collect.ui.component.input.*" 
				  xmlns:detail="org.openforis.collect.ui.component.detail.*"
				  width="130"
				  >
	
	<fx:Script>
		<![CDATA[
			import org.openforis.collect.presenter.DateAttributePresenter;
			import org.openforis.collect.util.StringUtil;
			
			private var _separator:String = "/";
			
			override protected function initPresenter():void {
				presenter = new DateAttributePresenter(this);
			}
			
			[Bindable]
			public function get separator():String {
				return _separator;
			}

			public function set separator(value:String):void {
				_separator = value;
			}
			
			protected function twoCharsZeroPaddingFormatFunction(value:String):String {
				return zeroPaddingFormatFunction(value, 2);
			}

			protected function fourCharsZeroPaddingFormatFunction(value:String):String {
				return zeroPaddingFormatFunction(value, 4);
			}
			
			protected function zeroPaddingFormatFunction(value:String, length:int):String {
				if(StringUtil.isNotBlank(value)) {
					var number:Number = Number(value);
					if(!isNaN(number)) {
						return StringUtil.zeroPad(number, length);
					} else {
						return value;
					}
				} else {
					return "";
				}
			}
		]]>
	</fx:Script>
	
	<s:HGroup 
			verticalAlign="middle"
			width="100%"
			horizontalAlign="center"
			gap="2">
		<input:NumericInputField id="day"
								 attributeDefinition="{attributeDefinition}"
								 parentEntity="{parentEntity}"
								 attribute="{attribute}"
								 isInDataGroup="{isInDataGroup}"
								 fieldIndex="2"
								 width="25" 
								 maxChars="2"
								 textFormatFunction="{twoCharsZeroPaddingFormatFunction}"
								 />
		<s:Label id="separator1" text="{separator}" />
		<input:NumericInputField id="month"
								 attributeDefinition="{attributeDefinition}"
								 parentEntity="{parentEntity}"
								 attribute="{attribute}"
								 isInDataGroup="{isInDataGroup}"
								 fieldIndex="1"
								 width="25 " 
								 maxChars="2"
								 textFormatFunction="{twoCharsZeroPaddingFormatFunction}"
								 />
		<s:Label id="separator2" text="{separator}" />
		<input:NumericInputField id="year"
								 attributeDefinition="{attributeDefinition}"
								 parentEntity="{parentEntity}"
								 attribute="{attribute}"
								 isInDataGroup="{isInDataGroup}"
								 fieldIndex="0"
								 width="40" 
								 maxChars="4"
								 textFormatFunction="{fourCharsZeroPaddingFormatFunction}"
								 />
		<input:DateField tabEnabled="false" tabFocusEnabled="false"
						 id="dateField" width="16" editable="false"/>
	</s:HGroup>
	
</detail:CompositeAttributeRenderer>
