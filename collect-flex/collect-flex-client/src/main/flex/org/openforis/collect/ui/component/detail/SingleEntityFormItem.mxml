<?xml version="1.0" encoding="utf-8"?>
<detail:EntityFormItem xmlns:fx="http://ns.adobe.com/mxml/2009" 
		 xmlns:s="library://ns.adobe.com/flex/spark" 
		 xmlns:mx="library://ns.adobe.com/flex/mx"
		 xmlns:detail="org.openforis.collect.ui.component.detail.*"
		 >

	<detail:layout>
		<s:VerticalLayout paddingLeft="10" />
	</detail:layout>
	
	<fx:Script>
		<![CDATA[
			import mx.collections.ListCollectionView;
			
			import org.openforis.collect.Application;
			import org.openforis.collect.metamodel.proxy.AttributeDefinitionProxy;
			import org.openforis.collect.metamodel.proxy.EntityDefinitionProxy;
			import org.openforis.collect.metamodel.proxy.NodeDefinitionProxy;
			import org.openforis.collect.ui.UIBuilder;
			
			override protected function createChildren():void {
				
				if(!childrenAdded){
					super.createChildren();
					addElement(form);
					
					var childDefinitions:ListCollectionView = entityDefinition.childDefinitions;
					for each (var def:NodeDefinitionProxy in childDefinitions) {
						if(UIBuilder.isInVersion(entityDefinition, Application.activeRecord.version)) {
							if(def is AttributeDefinitionProxy){
								var attrFormItem:AttributeFormItem = UIBuilder.getAttributeFormItem(AttributeDefinitionProxy(def) );
								form.addElement(attrFormItem);
								
							} else if(def is EntityDefinitionProxy) {
								var entityFormItem:EntityFormItem = UIBuilder.getEntityFormItem(EntityDefinitionProxy(def));
								form.addElement(entityFormItem);
							}
						}
						
					} 
					
					childrenAdded = true;
				}
			}
			

			
		]]>
	</fx:Script>
	
	<fx:Declarations>
		<!-- Place non-visual elements (e.g., services, value objects) here -->
	</fx:Declarations>
	
	
	
</detail:EntityFormItem>
